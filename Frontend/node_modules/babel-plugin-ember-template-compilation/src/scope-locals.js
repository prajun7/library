"use strict";
var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _ScopeLocals_mapping, _ScopeLocals_locals;
Object.defineProperty(exports, "__esModule", { value: true });
exports.ScopeLocals = void 0;
/*
  This class exists because:
   - before template compilation starts, we need to pass a `locals` array to
     ember-template-compiler
   - the JSUtils API can mutate the scope during template compilation
   - those scope mutations need to update both the original `locals` array and
     our own name mapping, keeping them in sync.
*/
class ScopeLocals {
    constructor() {
        _ScopeLocals_mapping.set(this, {});
        _ScopeLocals_locals.set(this, []);
    }
    get locals() {
        return __classPrivateFieldGet(this, _ScopeLocals_locals, "f");
    }
    has(key) {
        return key in __classPrivateFieldGet(this, _ScopeLocals_mapping, "f");
    }
    get(key) {
        return __classPrivateFieldGet(this, _ScopeLocals_mapping, "f")[key];
    }
    isEmpty() {
        return __classPrivateFieldGet(this, _ScopeLocals_locals, "f").length === 0;
    }
    needsRemapping() {
        return Object.entries(__classPrivateFieldGet(this, _ScopeLocals_mapping, "f")).some(([k, v]) => k !== v);
    }
    entries() {
        return Object.entries(__classPrivateFieldGet(this, _ScopeLocals_mapping, "f"));
    }
    add(key, value) {
        __classPrivateFieldGet(this, _ScopeLocals_mapping, "f")[key] = value !== null && value !== void 0 ? value : key;
        __classPrivateFieldGet(this, _ScopeLocals_locals, "f").push(key);
    }
}
exports.ScopeLocals = ScopeLocals;
_ScopeLocals_mapping = new WeakMap(), _ScopeLocals_locals = new WeakMap();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NvcGUtbG9jYWxzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2NvcGUtbG9jYWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOzs7Ozs7O0VBT0U7QUFDRixNQUFhLFdBQVc7SUFBeEI7UUFDRSwrQkFBbUMsRUFBRSxFQUFDO1FBQ3RDLDhCQUFvQixFQUFFLEVBQUM7SUE4QnpCLENBQUM7SUE1QkMsSUFBSSxNQUFNO1FBQ1IsT0FBTyx1QkFBQSxJQUFJLDJCQUFRLENBQUM7SUFDdEIsQ0FBQztJQUVELEdBQUcsQ0FBQyxHQUFXO1FBQ2IsT0FBTyxHQUFHLElBQUksdUJBQUEsSUFBSSw0QkFBUyxDQUFDO0lBQzlCLENBQUM7SUFFRCxHQUFHLENBQUMsR0FBVztRQUNiLE9BQU8sdUJBQUEsSUFBSSw0QkFBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFRCxPQUFPO1FBQ0wsT0FBTyx1QkFBQSxJQUFJLDJCQUFRLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRUQsY0FBYztRQUNaLE9BQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQyx1QkFBQSxJQUFJLDRCQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ2pFLENBQUM7SUFFRCxPQUFPO1FBQ0wsT0FBTyxNQUFNLENBQUMsT0FBTyxDQUFDLHVCQUFBLElBQUksNEJBQVMsQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7SUFFRCxHQUFHLENBQUMsR0FBVyxFQUFFLEtBQWM7UUFDN0IsdUJBQUEsSUFBSSw0QkFBUyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssYUFBTCxLQUFLLGNBQUwsS0FBSyxHQUFJLEdBQUcsQ0FBQztRQUNsQyx1QkFBQSxJQUFJLDJCQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3pCLENBQUM7Q0FDRjtBQWhDRCxrQ0FnQ0MiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICBUaGlzIGNsYXNzIGV4aXN0cyBiZWNhdXNlOlxuICAgLSBiZWZvcmUgdGVtcGxhdGUgY29tcGlsYXRpb24gc3RhcnRzLCB3ZSBuZWVkIHRvIHBhc3MgYSBgbG9jYWxzYCBhcnJheSB0b1xuICAgICBlbWJlci10ZW1wbGF0ZS1jb21waWxlclxuICAgLSB0aGUgSlNVdGlscyBBUEkgY2FuIG11dGF0ZSB0aGUgc2NvcGUgZHVyaW5nIHRlbXBsYXRlIGNvbXBpbGF0aW9uXG4gICAtIHRob3NlIHNjb3BlIG11dGF0aW9ucyBuZWVkIHRvIHVwZGF0ZSBib3RoIHRoZSBvcmlnaW5hbCBgbG9jYWxzYCBhcnJheSBhbmRcbiAgICAgb3VyIG93biBuYW1lIG1hcHBpbmcsIGtlZXBpbmcgdGhlbSBpbiBzeW5jLlxuKi9cbmV4cG9ydCBjbGFzcyBTY29wZUxvY2FscyB7XG4gICNtYXBwaW5nOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gICNsb2NhbHM6IHN0cmluZ1tdID0gW107XG5cbiAgZ2V0IGxvY2FscygpIHtcbiAgICByZXR1cm4gdGhpcy4jbG9jYWxzO1xuICB9XG5cbiAgaGFzKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGtleSBpbiB0aGlzLiNtYXBwaW5nO1xuICB9XG5cbiAgZ2V0KGtleTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy4jbWFwcGluZ1trZXldO1xuICB9XG5cbiAgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy4jbG9jYWxzLmxlbmd0aCA9PT0gMDtcbiAgfVxuXG4gIG5lZWRzUmVtYXBwaW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyh0aGlzLiNtYXBwaW5nKS5zb21lKChbaywgdl0pID0+IGsgIT09IHYpO1xuICB9XG5cbiAgZW50cmllcygpIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy4jbWFwcGluZyk7XG4gIH1cblxuICBhZGQoa2V5OiBzdHJpbmcsIHZhbHVlPzogc3RyaW5nKSB7XG4gICAgdGhpcy4jbWFwcGluZ1trZXldID0gdmFsdWUgPz8ga2V5O1xuICAgIHRoaXMuI2xvY2Fscy5wdXNoKGtleSk7XG4gIH1cbn1cbiJdfQ==